<!DOCTYPE html>
<html>
  <head>
    <title>Upload CSV</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    />
  </head>
  <body>
    <div class="container">
      <h1>Upload CSV</h1>
      <form action="/upload" method="post" enctype="multipart/form-data">
        <div class="form-group">
          <label for="file">Select CSV file:</label>
          <input type="file" id="file" name="file" accept=".csv" />
        </div>
        <button type="submit" class="btn btn-default">Upload</button>
      </form>

      <h2>Updated Data</h2>
      <table class="table">
        <% if (data.length > 0) { %>
        <thead>
          <tr>
            <% Object.keys(data[0]).forEach(key => { %>
            <th><%= key %></th>
            <% }); %>
          </tr>
        </thead>
        <tbody>
          <% data.forEach(row => { %>
          <tr>
            <% for (let key in row) { %>
            <td><%= row[key] %></td>
            <% } %>
          </tr>
          <% }); %>
        </tbody>
        <% } %>
      </table>

      <% if (csvPath) { %>
      <a href="<%= csvPath %>" download>Download updated CSV</a>
      <% } %>
    </div>
  </body>
</html>
